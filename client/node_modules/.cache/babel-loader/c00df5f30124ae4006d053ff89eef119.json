{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { db } from \"../db/firebase\";\nimport { collection, getDocs } from \"firebase/firestore\";\nimport { STATUS } from \"../utils/enums\";\nconst productsSlice = createSlice({\n  name: \"products\",\n  initialState: {\n    products: [],\n    status: STATUS.IDLE\n  },\n  reducers: {\n    setProducts: (state, action) => ({ ...state,\n      products: action.payload\n    }),\n    setStatus: (state, action) => ({ ...state,\n      status: action.payload\n    })\n  }\n});\nexport const {\n  setProducts,\n  setStatus\n} = productsSlice.actions;\nexport default productsSlice.reducer;\nexport const fetchProducts = () => {\n  return function fetchProductsThunk(dispatch) {\n    // dispatching loading status\n    dispatch(setStatus(STATUS.LOADING)); // fetching data from firestore db\n\n    const productsColl = collection(db, \"products\");\n    getDocs(productsColl).then(snapshot => {\n      const payload = snapshot.docs.map(pro => ({\n        id: pro.id,\n        ...pro.data()\n      }));\n      dispatch(setProducts(payload));\n      dispatch(setStatus(STATUS.IDLE));\n    }).catch(err => dispatch(setStatus(STATUS.ERROR)));\n  };\n};","map":{"version":3,"names":["createSlice","db","collection","getDocs","STATUS","productsSlice","name","initialState","products","status","IDLE","reducers","setProducts","state","action","payload","setStatus","actions","reducer","fetchProducts","fetchProductsThunk","dispatch","LOADING","productsColl","then","snapshot","docs","map","pro","id","data","catch","err","ERROR"],"sources":["D:/EDU/PROJECTS/Clones/amazon-clone/client/src/redux/productsSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { db } from \"../db/firebase\";\r\nimport { collection, getDocs } from \"firebase/firestore\";\r\nimport { STATUS } from \"../utils/enums\";\r\n\r\nconst productsSlice = createSlice({\r\n  name: \"products\",\r\n  initialState: {\r\n    products: [],\r\n    status: STATUS.IDLE,\r\n  },\r\n  reducers: {\r\n    setProducts: (state, action) => ({\r\n      ...state,\r\n      products: action.payload,\r\n    }),\r\n    setStatus: (state, action) => ({\r\n      ...state,\r\n      status: action.payload,\r\n    }),\r\n  },\r\n});\r\n\r\nexport const { setProducts, setStatus } = productsSlice.actions;\r\nexport default productsSlice.reducer;\r\n\r\nexport const fetchProducts = () => {\r\n  return function fetchProductsThunk(dispatch) {\r\n    // dispatching loading status\r\n    dispatch(setStatus(STATUS.LOADING));\r\n    // fetching data from firestore db\r\n    const productsColl = collection(db, \"products\");\r\n    getDocs(productsColl)\r\n      .then((snapshot) => {\r\n        const payload = snapshot.docs.map((pro) => ({\r\n          id: pro.id,\r\n          ...pro.data(),\r\n        }));\r\n        dispatch(setProducts(payload));\r\n        dispatch(setStatus(STATUS.IDLE));\r\n      })\r\n      .catch((err) => dispatch(setStatus(STATUS.ERROR)));\r\n  };\r\n};\r\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AACA,SAASC,EAAT,QAAmB,gBAAnB;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,oBAApC;AACA,SAASC,MAAT,QAAuB,gBAAvB;AAEA,MAAMC,aAAa,GAAGL,WAAW,CAAC;EAChCM,IAAI,EAAE,UAD0B;EAEhCC,YAAY,EAAE;IACZC,QAAQ,EAAE,EADE;IAEZC,MAAM,EAAEL,MAAM,CAACM;EAFH,CAFkB;EAMhCC,QAAQ,EAAE;IACRC,WAAW,EAAE,CAACC,KAAD,EAAQC,MAAR,MAAoB,EAC/B,GAAGD,KAD4B;MAE/BL,QAAQ,EAAEM,MAAM,CAACC;IAFc,CAApB,CADL;IAKRC,SAAS,EAAE,CAACH,KAAD,EAAQC,MAAR,MAAoB,EAC7B,GAAGD,KAD0B;MAE7BJ,MAAM,EAAEK,MAAM,CAACC;IAFc,CAApB;EALH;AANsB,CAAD,CAAjC;AAkBA,OAAO,MAAM;EAAEH,WAAF;EAAeI;AAAf,IAA6BX,aAAa,CAACY,OAAjD;AACP,eAAeZ,aAAa,CAACa,OAA7B;AAEA,OAAO,MAAMC,aAAa,GAAG,MAAM;EACjC,OAAO,SAASC,kBAAT,CAA4BC,QAA5B,EAAsC;IAC3C;IACAA,QAAQ,CAACL,SAAS,CAACZ,MAAM,CAACkB,OAAR,CAAV,CAAR,CAF2C,CAG3C;;IACA,MAAMC,YAAY,GAAGrB,UAAU,CAACD,EAAD,EAAK,UAAL,CAA/B;IACAE,OAAO,CAACoB,YAAD,CAAP,CACGC,IADH,CACSC,QAAD,IAAc;MAClB,MAAMV,OAAO,GAAGU,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAmBC,GAAD,KAAU;QAC1CC,EAAE,EAAED,GAAG,CAACC,EADkC;QAE1C,GAAGD,GAAG,CAACE,IAAJ;MAFuC,CAAV,CAAlB,CAAhB;MAIAT,QAAQ,CAACT,WAAW,CAACG,OAAD,CAAZ,CAAR;MACAM,QAAQ,CAACL,SAAS,CAACZ,MAAM,CAACM,IAAR,CAAV,CAAR;IACD,CARH,EASGqB,KATH,CASUC,GAAD,IAASX,QAAQ,CAACL,SAAS,CAACZ,MAAM,CAAC6B,KAAR,CAAV,CAT1B;EAUD,CAfD;AAgBD,CAjBM"},"metadata":{},"sourceType":"module"}